' 32 fliegende Kugeln und Würfel – Demo
10 REM 32 Kugeln und Würfel, zufällige Größe, Position, Richtung, Rotation
20 CLS
30 PRINT "VectorBallz Demo: 32 Kugeln und Würfel"
40 PRINT "--------------------------------------"
50 WAIT 500

100 REM Konstanten
110 LET NUM_OBJS = 32
120 LET DELAY = 12
130 LET MAXX = 10.0
140 LET MINX = -10.0
150 LET MAXY = 8
160 LET MINY = -8
170 LET MINZ = -12.0
180 LET MAXZ = -4.0

200 REM Arrays für Objekte
210 DIM X(NUM_OBJS)
220 DIM Y(NUM_OBJS)
230 DIM Z(NUM_OBJS)
240 DIM XS(NUM_OBJS)
250 DIM YS(NUM_OBJS)
260 DIM ZS(NUM_OBJS)
270 DIM RADIUS(NUM_OBJS)
280 DIM ROTX(NUM_OBJS)
290 DIM ROTY(NUM_OBJS)
300 DIM ROTZ(NUM_OBJS)
310 DIM ROTS(NUM_OBJS)
320 DIM IS_SPHERE(NUM_OBJS)
330 DIM COLOR(NUM_OBJS)

400 REM Initialisierung
410 FOR I = 1 TO NUM_OBJS
420   LET X(I) = (RND(MAXX-MINX*10)+MINX*10)/10
430   LET Y(I) = (RND(MAXY-MINY*10)+MINY*10)/10
440   LET Z(I) = (RND(MAXZ-MINZ*10)+MINZ*10)/10
450   LET XS(I) = ((RND(36)-18)/100) + 0.08
460   LET YS(I) = ((RND(26)-13)/100) + 0.07
470   LET ZS(I) = 0
480   LET RADIUS(I) = (RND(30)+7)/10
490   LET ROTX(I) = RND(359)
500   LET ROTY(I) = RND(359)
510   LET ROTZ(I) = RND(359)
520   LET ROTS(I) = RND(5) + 1
530   IF RND(2) = 0 THEN LET IS_SPHERE(I) = 1 ELSE LET IS_SPHERE(I) = 0
540   LET COLOR(I) = RND(13)+2
550 NEXT I

600 REM Hauptschleife
610 FOR FRAME = 1 TO 100000
620   FOR I = 1 TO NUM_OBJS
630     LET X(I) = X(I) + XS(I)
640     LET Y(I) = Y(I) + YS(I)
650     LET Z(I) = Z(I) + ZS(I)
660     LET ROTX(I) = ROTX(I) + ROTS(I)
670     LET ROTY(I) = ROTY(I) + ROTS(I)*0.7
680     LET ROTZ(I) = ROTZ(I) + ROTS(I)*0.5
690     IF ROTX(I) >= 360 THEN LET ROTX(I) = ROTX(I) - 360
700     IF ROTY(I) >= 360 THEN LET ROTY(I) = ROTY(I) - 360
710     IF ROTZ(I) >= 360 THEN LET ROTZ(I) = ROTZ(I) - 360

720     REM Kollision X
730     IF X(I) > MAXX THEN LET X(I) = MAXX : LET XS(I) = -ABS(XS(I))
740     IF X(I) < MINX THEN LET X(I) = MINX : LET XS(I) = ABS(XS(I))

750     REM Kollision Y
760     IF Y(I) > MAXY THEN LET Y(I) = MAXY : LET YS(I) = -ABS(YS(I))
770     IF Y(I) < MINY THEN LET Y(I) = MINY : LET YS(I) = ABS(YS(I))

780     REM Kollision Z (optional, meist konstant)
790     IF Z(I) > MAXZ THEN LET Z(I) = MAXZ : LET ZS(I) = -ABS(ZS(I))
800     IF Z(I) < MINZ THEN LET Z(I) = MINZ : LET ZS(I) = ABS(ZS(I))

810     IF IS_SPHERE(I) = 1 THEN VECTOR I, "sphere", X(I), Y(I), Z(I), ROTX(I), ROTY(I), ROTZ(I), RADIUS(I), COLOR(I)
830     IF IS_SPHERE(I) = 0 THEN VECTOR I, "cube", X(I), Y(I), Z(I), ROTX(I), ROTY(I), ROTZ(I), RADIUS(I), COLOR(I)
860   NEXT I
870   WAIT DELAY
880 NEXT FRAME

900 END
